<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>P1 Title</title>
    <link href="player.css" rel="stylesheet">
</head>
<body>
<h1 id='p1-name'>Please wait...</h1>
<script>
// generate a random UUID for the client
let uuid;
if (typeof self.crypto.randomUUID === 'function') {
    uuid = self.crypto.randomUUID();
} else {
    uuid = Math.floor(Math.random(1) * 1_000_000_000_000_000).toString();
}

const serverIP = 'jennaknudsen.info';
const wsclient = new WebSocket('wss://' + serverIP + '?id=' + uuid);

// get all information on page load
wsclient.onopen = () => {
    wsclient.send(JSON.stringify({ get: true }));
}

// on message received, set correct HTML element with correct text
wsclient.onmessage = message => {
    const messageData = JSON.parse(message.data);
    document.getElementById('p1-name').innerHTML = messageData.p1_name + (messageData.p1_losers ? " [L]" : "");
}
</script>
</body>
</html>